#!/bin/sh 

# Stupid script to print the averages for lmbench results
# Pass the dir containing the raw result files as argument

echo `awk '{ sum += $3 } END { print "nullSyscall : " sum / NR }' $1/nullSyscall`;
echo `awk '{ sum += $3 } END { print "openSyscall : " sum / NR }' $1/openSyscall`;
echo `awk '{ sum += $2 } END { print "mmapSyscall : " sum / NR }' $1/mmapSyscall`;
echo `awk '{ sum += $4 } END { print "pgSyscall : " sum / NR }' $1/pgSyscall`;
echo `awk '{ sum += $4 } END { print "installSig : " sum / NR }' $1/installSig`;
echo `awk '{ sum += $4 } END { print "catchSig : " sum / NR }' $1/catchSig`;
echo `awk '{ sum += $3 } END { print "forkSyscall : " sum / NR }' $1/forkSyscall`;
echo `awk '{ sum += $3 } END { print "execSyscall : " sum / NR }' $1/execSyscall`;

echo `grep "^0k" $1/fsSyscall | awk '{ sum += $3 } END { print "fsSyscall create 0k : " sum / NR }'`;
echo `grep 1k $1/fsSyscall | awk '{ sum += $3 } END { print "fsSyscall create 1k : " sum / NR }'`;
echo `grep 4k $1/fsSyscall | awk '{ sum += $3 } END { print "fsSyscall create 4k : " sum / NR }'`;
echo `grep 10k $1/fsSyscall | awk '{ sum += $3 } END { print "fsSyscall create 10k : " sum / NR }'`;

echo `grep "^0k" $1/fsSyscall | awk '{ sum += $4 } END { print "fsSyscall delete 0k : " sum / NR }'`;
echo `grep 1k $1/fsSyscall | awk '{ sum += $4 } END { print "fsSyscall delete 1k : " sum / NR }'`;
echo `grep 4k $1/fsSyscall | awk '{ sum += $4 } END { print "fsSyscall delete 4k : " sum / NR }'`;
echo `grep 10k $1/fsSyscall | awk '{ sum += $4 } END { print "fsSyscall delete 10k : " sum / NR }'`;

